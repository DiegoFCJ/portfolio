<header class="layout__header">
  <div class="layout__topbar">
    <a class="layout__brand" routerLink="/" (click)="onNavigateLink()">Mirko Bottazzo</a>

    <nav class="layout__navigation" aria-label="Primary">
      <a
        *ngFor="let item of navigationItems; trackBy: trackByRoute"
        [routerLink]="item.route"
        routerLinkActive="layout__link--active"
        [routerLinkActiveOptions]="{ exact: item.exact ?? false }"
        class="layout__link"
        (click)="onNavigateLink()"
      >
        {{ item.label }}
      </a>
    </nav>

    <div class="layout__preferences" role="group" [attr.aria-label]="languageLabel + ' & ' + themeLabel">
      <div class="layout__dropdown" [class.layout__dropdown--open]="showLanguageMenu">
        <button
          type="button"
          class="layout__dropdown-trigger"
          (click)="toggleLanguageMenu($event)"
          [attr.aria-expanded]="showLanguageMenu"
          [attr.aria-controls]="languageMenuId"
          aria-haspopup="menu"
          [attr.aria-label]="languageLabel"
        >
          <span class="layout__dropdown-label">{{ currentLanguage | uppercase }}</span>
          <span class="layout__dropdown-chevron" aria-hidden="true"></span>
        </button>

        <div
          *ngIf="showLanguageMenu"
          class="layout__dropdown-menu"
          [id]="languageMenuId"
          role="menu"
          [attr.aria-label]="languageLabel"
        >
          <button
            *ngFor="let language of languages"
            type="button"
            class="layout__dropdown-option"
            role="menuitemradio"
            [attr.aria-checked]="language === currentLanguage"
            (click)="onSelectLanguage(language)"
          >
            <span class="layout__dropdown-option-label">{{ getLanguageName(language) }}</span>
            <span class="layout__dropdown-option-hint">{{ language | uppercase }}</span>
          </button>
        </div>
      </div>

      <div class="layout__dropdown" [class.layout__dropdown--open]="showThemeMenu">
        <button
          type="button"
          class="layout__dropdown-trigger layout__dropdown-trigger--wide"
          (click)="toggleThemeMenu($event)"
          [attr.aria-expanded]="showThemeMenu"
          [attr.aria-controls]="themeMenuId"
          aria-haspopup="menu"
          [attr.aria-label]="themeLabel"
        >
          <span class="layout__dropdown-label">{{ getThemeName(currentTheme) }}</span>
          <span class="layout__dropdown-chevron" aria-hidden="true"></span>
        </button>

        <div
          *ngIf="showThemeMenu"
          class="layout__dropdown-menu"
          [id]="themeMenuId"
          role="menu"
          [attr.aria-label]="themeLabel"
        >
          <button
            *ngFor="let theme of themes"
            type="button"
            class="layout__dropdown-option"
            role="menuitemradio"
            [attr.aria-checked]="theme.key === currentTheme"
            (click)="onSelectTheme(theme.key)"
          >
            <span class="layout__dropdown-option-label">{{ getThemeName(theme.key) }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="layout__main">
  <router-outlet></router-outlet>
</main>

<div class="layout__assistant">
  <app-assistant></app-assistant>
</div>

<div class="layout__navigator">
  <app-navigator
    [totalSections]="totalSections"
    [currentSectionIndex]="currentSectionIndex"
    (navigateNext)="onNavigateNextSection()"
    (navigatePrevious)="onNavigatePreviousSection()"
  ></app-navigator>
</div>
