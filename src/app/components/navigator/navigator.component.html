<div class="navigator" [class.is-open]="isOpen">
  <div class="navigator__toggle-guard">
    <button
      class="navigator__toggle"
      type="button"
      (click)="toggleNavigator()"
      [attr.aria-expanded]="isOpen"
      [attr.aria-label]="isOpen ? 'Chiudi navigatore' : 'Apri navigatore'"
    >
      <span class="navigator__toggle-icon" [class.is-open]="isOpen" aria-hidden="true">
        <mat-icon class="navigator__toggle-icon-open">menu</mat-icon>
        <mat-icon class="navigator__toggle-icon-close">close</mat-icon>
      </span>
    </button>
  </div>

  <div class="navigator__panel" *ngIf="isOpen">
    <div class="navigator__surface">
      <div class="navigator__rail">
        <button
          class="navigator__rail-button"
          type="button"
          *ngIf="currentSectionIndex > 0"
          (click)="onPrevious()"
          aria-label="Sezione precedente"
          [matTooltip]="getTooltip('prev')"
          matTooltipPosition="left"
        >
          <mat-icon>arrow_upward</mat-icon>
        </button>
        <button
          class="navigator__rail-button"
          type="button"
          *ngIf="currentSectionIndex < totalSections - 1"
          (click)="onNext()"
          aria-label="Sezione successiva"
          [matTooltip]="getTooltip('next')"
          matTooltipPosition="left"
        >
          <mat-icon>arrow_downward</mat-icon>
        </button>
      </div>

      <div class="navigator__group">
        <button
          class="navigator__chip"
          type="button"
          (click)="toggleThemeOptions()"
          aria-label="Selettore tema"
          [matTooltip]="getTooltip('theme')"
          matTooltipPosition="left"
        >
          <mat-icon>{{ getThemeIcon(currentTheme) }}</mat-icon>
        </button>
        <div class="navigator__options" *ngIf="showThemeOptions">
          <button
            class="navigator__option"
            type="button"
            (click)="changeTheme('light')"
            aria-label="Tema chiaro"
            [class.is-active]="currentTheme === 'light'"
          >
            <mat-icon>light_mode</mat-icon>
          </button>
          <button
            class="navigator__option"
            type="button"
            (click)="changeTheme('dark')"
            aria-label="Tema scuro"
            [class.is-active]="currentTheme === 'dark'"
          >
            <mat-icon>dark_mode</mat-icon>
          </button>
          <button
            class="navigator__option"
            type="button"
            (click)="changeTheme('blue')"
            aria-label="Tema blu"
            [class.is-active]="currentTheme === 'blue'"
          >
            <mat-icon>water_drop</mat-icon>
          </button>
          <button
            class="navigator__option"
            type="button"
            (click)="changeTheme('green')"
            aria-label="Tema verde"
            [class.is-active]="currentTheme === 'green'"
          >
            <mat-icon>eco</mat-icon>
          </button>
        </div>
      </div>

      <div class="navigator__group">
        <button
          class="navigator__chip"
          type="button"
          (click)="toggleLanguageOptions()"
          [matTooltip]="getTooltip('language')"
          matTooltipPosition="left"
        >
          <span class="navigator__language-label">{{ currentLang | slice: 0:3 | uppercase }}</span>
        </button>
        <div class="navigator__options" *ngIf="showLanguageOptions">
          <button
            class="navigator__option"
            type="button"
            (click)="changeLanguage('en')"
            aria-label="Inglese"
          >
            <span class="navigator__flag">ðŸ‡¬ðŸ‡§</span>
          </button>
          <button
            class="navigator__option"
            type="button"
            (click)="changeLanguage('it')"
            aria-label="Italiano"
          >
            <span class="navigator__flag">ðŸ‡®ðŸ‡¹</span>
          </button>
          <button
            class="navigator__option"
            type="button"
            (click)="changeLanguage('de')"
            aria-label="Tedesco"
          >
            <span class="navigator__flag">ðŸ‡©ðŸ‡ª</span>
          </button>
          <button
            class="navigator__option"
            type="button"
            (click)="changeLanguage('es')"
            aria-label="Spagnolo"
          >
            <span class="navigator__flag">ðŸ‡ªðŸ‡¸</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
