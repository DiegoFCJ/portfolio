<div class="navigator-wrapper">
  <div class="navigator-toggle-slot">
    <!-- Toggle button always available -->
    <button class="nav-toggle-button" (click)="toggleNavigator()"
      [attr.aria-expanded]="isOpen"
      [attr.aria-label]="isOpen ? 'Chiudi navigatore' : 'Apri navigatore'">
      <span class="toggle-icon-stack" aria-hidden="true">
        <mat-icon class="toggle-icon" [class.is-active]="!isOpen">expand_less</mat-icon>
        <mat-icon class="toggle-icon" [class.is-active]="isOpen">expand_more</mat-icon>
      </span>
    </button>
  </div>

  <!-- Modern, animated, circular floating navbar -->
  <div class="navigator-layer" *ngIf="isOpen">
    <div class="navigator-surface">
      <div class="modern-navigator">
        <div class="arrow-container">
          <!-- Previous button -->
          <button class="arrow-button" *ngIf="currentSectionIndex > 0" (click)="onPrevious()"
            aria-label="Sezione precedente"
            [matTooltip]="getTooltip('prev')" matTooltipPosition="left">
            <mat-icon>arrow_upward</mat-icon>
          </button>

          <!-- Next button -->
          <button class="arrow-button" *ngIf="currentSectionIndex < totalSections - 1" (click)="onNext()"
            aria-label="Sezione successiva"
            [matTooltip]="getTooltip('next')" matTooltipPosition="left">
            <mat-icon>arrow_downward</mat-icon>
          </button>
        </div>

        <div class="nav-group">
          <button class="nav-button" (click)="toggleThemeOptions()" aria-label="Selettore tema"
            [matTooltip]="getTooltip('theme')" matTooltipPosition="left">
            <mat-icon>{{ getThemeIcon(currentTheme) }}</mat-icon>
          </button>
          <div class="option-container" *ngIf="showThemeOptions">
            <button class="option-button" (click)="changeTheme('light')" aria-label="Tema chiaro"
              [class.selected]="currentTheme === 'light'">
              <mat-icon>light_mode</mat-icon>
            </button>
            <button class="option-button" (click)="changeTheme('dark')" aria-label="Tema scuro"
              [class.selected]="currentTheme === 'dark'">
              <mat-icon>dark_mode</mat-icon>
            </button>
            <button class="option-button" (click)="changeTheme('blue')" aria-label="Tema blu"
              [class.selected]="currentTheme === 'blue'">
              <mat-icon>water_drop</mat-icon>
            </button>
            <button class="option-button" (click)="changeTheme('green')" aria-label="Tema verde"
              [class.selected]="currentTheme === 'green'">
              <mat-icon>eco</mat-icon>
            </button>
          </div>
        </div>

        <div class="nav-group">
          <button class="nav-button" (click)="toggleLanguageOptions()" [matTooltip]="getTooltip('language')"
            matTooltipPosition="left">
            <span class="lang-label">{{ currentLang | slice:0:3 | uppercase }}</span>
          </button>
          <div class="option-container" *ngIf="showLanguageOptions">
            <button class="option-button" (click)="changeLanguage('en')" aria-label="Inglese">
              <span class="lang-flag">ðŸ‡¬ðŸ‡§</span>
            </button>
            <button class="option-button" (click)="changeLanguage('it')" aria-label="Italiano">
              <span class="lang-flag">ðŸ‡®ðŸ‡¹</span>
            </button>
            <button class="option-button" (click)="changeLanguage('de')" aria-label="Tedesco">
              <span class="lang-flag">ðŸ‡©ðŸ‡ª</span>
            </button>
            <button class="option-button" (click)="changeLanguage('es')" aria-label="Spagnolo">
              <span class="lang-flag">ðŸ‡ªðŸ‡¸</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
