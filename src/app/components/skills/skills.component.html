<section class="skills-section" *ngIf="!isLoading">
  <h2 class="skills-title">{{ skillFullTitle }}</h2>

  <!-- Carousell-->
  <div *ngIf="isMobile; else desktopLayout" class="carousel-container">
    <button class="arrow-left" (click)="moveToPrevious()">&#10094;</button>
    <div class="carousel-wrapper">
      <div *ngFor="let section of sections; let i = index" class="carousel-item" [class.active]="i === currentIndex">
        <div class="skill-section">
          <h3>{{ section.title }}</h3>
          <p class="skill-subtitle" *ngIf="timelineSections[i]?.subtitle">{{ timelineSections[i].subtitle }}</p>
          <div class="skills">
            <div *ngFor="let skill of section.skills" class="skill-item">
              <img [src]="skill.icon" [alt]="skill.name" (click)="onSkillClick($event, skill)"
                [ngClass]="{'clicked': skill.clicked}" />
            </div>
          </div>
        </div>
        <button class="arrow-right" type="button" (click)="moveToNext()" aria-label="Sezione successiva">&#10095;</button>
      </div>
    </ng-container>

    <ng-template #desktopSpotlight>
      <div class="spotlight-grid">
        <ng-container *ngFor="let section of activeSections; trackBy: trackBySection">
          <ng-container *ngTemplateOutlet="spotlightCard; context: { $implicit: section }"></ng-container>
        </ng-container>
      </div>
    </ng-template>
  </div>
</section>

  <!-- Desktop -->
  <ng-template #desktopLayout>
    <div class="timeline" role="list">
      <article class="timeline-item" role="listitem" *ngFor="let section of timelineSections; let last = last">
        <div class="timeline-axis" aria-hidden="true">
          <span class="timeline-dot"></span>
          <span class="timeline-connector" [class.is-last]="last"></span>
        </div>
        <div class="timeline-content">
          <header class="timeline-header">
            <span class="timeline-subtitle" *ngIf="section.subtitle">{{ section.subtitle }}</span>
            <h3 class="timeline-title">{{ section.title }}</h3>
          </header>
          <div class="skill-grid" role="list">
            <button *ngFor="let skill of section.skills" type="button" class="skill-chip" role="listitem"
              (click)="onSkillClick($event, skill)" [class.clicked]="skill.clicked">
              <span class="chip-icon">
                <img [src]="skill.icon" [alt]="skill.name" />
              </span>
              <span class="chip-label">{{ skill.name }}</span>
            </button>
          </div>
        </div>
      </article>
    </div>
  </ng-template>
</section>
