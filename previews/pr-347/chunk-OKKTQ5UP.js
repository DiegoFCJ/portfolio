import{a as Z}from"./chunk-RR7NRF3U.js";import{r as Y}from"./chunk-HD4H6WOH.js";import{Ab as s,Ca as B,Cc as K,Eb as L,Ec as X,Fb as D,Gb as M,Jb as b,Kb as p,Lb as _,Mb as u,Pb as U,Qa as x,Rb as A,Sa as V,T as S,Va as o,Wa as P,Wb as T,a as w,b as I,da as $,ec as z,ib as d,j as F,lb as g,ma as v,mb as c,na as h,ob as y,rb as a,sb as l,sc as N,tb as H,tc as Q,ub as j,uc as q,vb as C,vc as W,wb as E,wc as G,xb as O,yc as J,zb as k}from"./chunk-M7VV3QGG.js";var ie=["projectsSection"],ne=["descriptionContent"],te=(i,t)=>({$implicit:i,index:t});function oe(i,t){i&1&&E(0)}function re(i,t){if(i&1&&(a(0,"div",14),d(1,oe,1,0,"ng-container",15),l()),i&2){let e=t.$implicit,n=t.index;s(2);let r=b(7);g("aria-label",e.title),o(),c("ngTemplateOutlet",r)("ngTemplateOutletContext",A(3,te,e,n))}}function se(i,t){if(i&1){let e=O();a(0,"div",10)(1,"div",11),k("scroll",function(){v(e);let r=s(2);return h(r.handleCarouselInteraction())})("touchstart",function(){v(e);let r=s(2);return h(r.handleCarouselInteraction())})("mousedown",function(){v(e);let r=s(2);return h(r.handleCarouselInteraction())}),a(2,"div",12),d(3,re,2,6,"div",13),l()()()}if(i&2){let e=s(2);y("is-peeking",e.shouldPeek),o(),g("aria-label",e.projects.title),o(2),c("ngForOf",e.projects.projects)}}function ae(i,t){i&1&&E(0)}function le(i,t){if(i&1&&(j(0),d(1,ae,1,0,"ng-container",15),C()),i&2){let e=t.$implicit,n=t.index;s(2);let r=b(7);o(),c("ngTemplateOutlet",r)("ngTemplateOutletContext",A(2,te,e,n))}}function ce(i,t){if(i&1&&(a(0,"div",16),d(1,le,2,5,"ng-container",17),l()),i&2){let e=s(2);o(),c("ngForOf",e.projects.projects)}}function pe(i,t){if(i&1&&(a(0,"li",40),p(1),l()),i&2){let e=t.$implicit,n=s(4);o(),u(" ",n.getStatusTagLabel(e)," ")}}function me(i,t){if(i&1&&(a(0,"ul",38),d(1,pe,2,1,"li",39),l()),i&2){let e=s().$implicit;o(),c("ngForOf",e.status.tags)}}function de(i,t){if(i&1&&(a(0,"a",41),p(1),l()),i&2){let e=s().$implicit,n=s(2);c("href",n.getCodeUrl(e.links),x),o(),u(" ",n.projects.linksLegend.code.availableLabel," ")}}function ue(i,t){if(i&1&&(a(0,"span",42),p(1),l()),i&2){let e=s(3);o(),u(" ",e.projects.linksLegend.code.privateLabel," ")}}function _e(i,t){if(i&1&&(a(0,"span",43),p(1),l()),i&2){let e=s(3);o(),u(" ",e.projects.linksLegend.code.unavailableLabel," ")}}function ge(i,t){if(i&1&&(j(0),a(1,"a",41),p(2),l(),C()),i&2){let e=s().$implicit,n=s(2);o(),c("href",n.getSiteUrl(e.links),x),o(),u(" ",n.projects.linksLegend.preview.siteLabel," ")}}function fe(i,t){if(i&1&&(j(0),a(1,"a",41),p(2),l(),C()),i&2){let e=s(2).$implicit,n=s(2);o(),c("href",n.getDemoUrl(e.links),x),o(),u(" ",n.projects.linksLegend.preview.demoLabel," ")}}function ve(i,t){if(i&1&&d(0,fe,3,2,"ng-container",37),i&2){let e=s().$implicit,n=b(31),r=s(2);c("ngIf",r.hasAvailableDemo(e.links))("ngIfElse",n)}}function he(i,t){if(i&1&&(a(0,"span",43),p(1),l()),i&2){let e=s(3);o(),u(" ",e.projects.linksLegend.preview.unavailableLabel," ")}}function xe(i,t){if(i&1){let e=O();a(0,"article",18)(1,"div",19),H(2,"img",20),l(),a(3,"div",21)(4,"h3",22),p(5),l(),a(6,"div",23)(7,"span",24)(8,"span",25),p(9),l(),a(10,"span",26),p(11),l()(),d(12,me,2,1,"ul",27),l()(),a(13,"p",28),p(14),l(),a(15,"div",29)(16,"div",30,2),k("scroll",function(r){let m=v(e).$implicit,f=s(2);return h(f.onDescriptionScroll(m,r))}),a(18,"p"),p(19),l()()(),a(20,"div",31)(21,"div",32),j(22,33),d(23,de,2,2,"a",34)(24,ue,2,1,"span",35)(25,_e,2,1,"span",36),C(),l(),a(26,"div",32),d(27,ge,3,2,"ng-container",37)(28,ve,1,2,"ng-template",null,3,T)(30,he,2,1,"ng-template",null,4,T),l()()()}if(i&2){let e=t.$implicit,n=t.index,r=b(29),m=s(2);g("data-status-level",e.status.level),o(2),c("src",e.image,x),g("alt",m.projects.imageAltPrefix+e.title),o(3),_(e.title),o(4),_(m.projects.statusLegend.prefix),o(2),_(m.getStatusLevelLabel(e.status.level)),o(),c("ngIf",e.status.tags==null?null:e.status.tags.length),o(2),_(e.technologies.join(" \xB7 ")),o(),y("is-scrollable",e.isScrollable)("is-at-end",e.isAtEnd),o(),g("id","project-description-"+n)("aria-label",e.title+" \u2014 dettagli"),o(3),_(e.description),o(3),c("ngSwitch",m.getCodeState(e.links)),o(),c("ngSwitchCase","available"),o(),c("ngSwitchCase","private"),o(3),c("ngIf",m.hasAvailableSite(e.links))("ngIfElse",r)}}function je(i,t){if(i&1&&(a(0,"section",6,0)(2,"h2",7),p(3),l(),d(4,se,4,4,"div",8)(5,ce,2,1,"div",9)(6,xe,32,20,"ng-template",null,1,T),l()),i&2){let e=s();o(3),_(e.projects.title),o(),c("ngIf",e.isMobile),o(),c("ngIf",!e.isMobile)}}var ee=class i{constructor(t,e,n){this.translationService=t;this.platformId=e;this.cdr=n;this.isBrowser=X(this.platformId)}projects={title:"",button:"",imageAltPrefix:"",toggle:{expand:"",collapse:""},navigation:{previous:"",next:""},statusLegend:{prefix:"",levels:{active:"",publicBeta:"",inDevelopment:""},tags:{openSource:"",release2024:""}},linksLegend:{code:{availableLabel:"",privateLabel:"",unavailableLabel:""},preview:{siteLabel:"",demoLabel:"",unavailableLabel:""}},projects:[]};isMobile=!1;isLoading=!0;shouldPeek=!1;descriptionContents;set projectsSectionRef(t){this.projectsSection=t??null,this.setupPeekObserver()}peekStartTimeoutId=null;peekStopTimeoutId=null;scrollComputationTimeoutId=null;scrollComputationPending=!1;projectsSection=null;peekObserver=null;lastPeekTimestamp=0;peekAnimationDuration=2e3;isBrowser;destroy$=new F;ngOnInit(){this.isBrowser&&this.checkIfMobile(),this.translationService.currentLanguage$.pipe(S(this.destroy$)).subscribe(()=>{this.isLoading=!0}),this.translationService.getTranslatedData(Z).pipe(S(this.destroy$)).subscribe(t=>{this.projects=I(w({},t),{projects:t.projects.map(e=>I(w({},e),{isScrollable:!1,isAtEnd:!0}))}),this.isLoading=!1,this.scheduleScrollComputation(),this.setupPeekObserver()})}ngAfterViewInit(){this.isBrowser&&(this.descriptionContents.changes.pipe(S(this.destroy$)).subscribe(()=>this.scheduleScrollComputation()),this.scheduleScrollComputation(),this.setupPeekObserver())}ngOnDestroy(){this.clearPeekTimers(),this.scrollComputationTimeoutId&&(clearTimeout(this.scrollComputationTimeoutId),this.scrollComputationTimeoutId=null),this.peekObserver&&(this.peekObserver.disconnect(),this.peekObserver=null),this.destroy$.next(),this.destroy$.complete()}onResize(){this.isBrowser&&(this.checkIfMobile(),this.scheduleScrollComputation(),this.setupPeekObserver())}checkIfMobile(){this.isMobile=window.innerWidth<=768}onDescriptionScroll(t,e){if(!this.isBrowser)return;let n=e.target,r=n.scrollTop+n.clientHeight>=n.scrollHeight-1;t.isAtEnd=r}handleCarouselInteraction(){this.clearPeekTimers(),this.shouldPeek&&(this.shouldPeek=!1),this.lastPeekTimestamp=Date.now()}getStatusLevelLabel(t){let e=this.projects.statusLegend.levels[t];return e?.trim()?e:t}getStatusTagLabel(t){let e=this.projects.statusLegend.tags[t];return e?.trim()?e:t}triggerPeekAnimation(){if(!this.isBrowser||!this.isMobile||(this.projects.projects?.length??0)<=1)return;let t=Date.now();this.shouldPeek||t-this.lastPeekTimestamp<this.peekAnimationDuration||(this.clearPeekTimers(),this.shouldPeek=!1,this.peekStartTimeoutId=setTimeout(()=>{this.shouldPeek=!0,this.lastPeekTimestamp=Date.now(),this.peekStopTimeoutId=setTimeout(()=>{this.shouldPeek=!1,this.peekStopTimeoutId=null},this.peekAnimationDuration),this.peekStartTimeoutId=null},120))}clearPeekTimers(){this.peekStartTimeoutId&&(clearTimeout(this.peekStartTimeoutId),this.peekStartTimeoutId=null),this.peekStopTimeoutId&&(clearTimeout(this.peekStopTimeoutId),this.peekStopTimeoutId=null)}getCodeState(t){let e=t?.code;return!e||e.state==="available"&&!e.url?"unavailable":e.state}getCodeUrl(t){let e=t?.code;return e?.state==="available"&&e.url?e.url:void 0}hasAvailableSite(t){let e=t?.site;return!!e&&e.state==="available"&&!!e.url}getSiteUrl(t){return this.hasAvailableSite(t)?t?.site?.url:void 0}hasAvailableDemo(t){let e=t?.demo;return!!e&&e.state==="available"&&!!e.url}getDemoUrl(t){return this.hasAvailableDemo(t)?t?.demo?.url:void 0}setupPeekObserver(){if(!this.isBrowser)return;this.peekObserver&&(this.peekObserver.disconnect(),this.peekObserver=null);let t=this.projectsSection,e=(this.projects.projects?.length??0)>1;if(!t||!this.isMobile||!e){this.clearPeekTimers(),this.shouldPeek&&(this.shouldPeek=!1);return}this.peekObserver=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&this.triggerPeekAnimation()})},{threshold:.4}),this.peekObserver.observe(t.nativeElement)}scheduleScrollComputation(){this.isBrowser&&(this.scrollComputationPending&&this.scrollComputationTimeoutId||(this.scrollComputationPending=!0,this.scrollComputationTimeoutId=setTimeout(()=>{this.scrollComputationPending=!1,this.scrollComputationTimeoutId=null,this.computeScrollableStates()})))}computeScrollableStates(){if(!this.isBrowser||!this.descriptionContents)return;let t=this.projects.projects??[];this.descriptionContents.forEach((e,n)=>{let r=e.nativeElement,m=t[n];if(!m)return;let f=r.scrollHeight-r.clientHeight>2,R=!f||r.scrollTop+r.clientHeight>=r.scrollHeight-1;(m.isScrollable!==f||m.isAtEnd!==R)&&(m.isScrollable=f,m.isAtEnd=R)}),this.cdr.markForCheck()}static \u0275fac=function(e){return new(e||i)(P(Y),P(B),P(z))};static \u0275cmp=$({type:i,selectors:[["app-projects"]],viewQuery:function(e,n){if(e&1&&(L(ie,5),L(ne,5)),e&2){let r;D(r=M())&&(n.projectsSectionRef=r.first),D(r=M())&&(n.descriptionContents=r)}},hostBindings:function(e,n){e&1&&k("resize",function(){return n.onResize()},!1,V)},standalone:!0,features:[U],decls:1,vars:1,consts:[["projectsSection",""],["projectCard",""],["descriptionContent",""],["checkDemo",""],["previewUnavailable",""],["class","projects-section",4,"ngIf"],[1,"projects-section"],[1,"projects-title"],["class","carousel-container",3,"is-peeking",4,"ngIf"],["class","project-cards",4,"ngIf"],[1,"carousel-container"],["role","listbox","tabindex","0",1,"carousel-viewport",3,"scroll","touchstart","mousedown"],[1,"carousel-wrapper"],["class","carousel-item","role","option",4,"ngFor","ngForOf"],["role","option",1,"carousel-item"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"project-cards"],[4,"ngFor","ngForOf"],[1,"project-card"],[1,"project-visual"],[1,"proj-image",3,"src"],[1,"project-header"],[1,"project-title"],[1,"project-status-wrapper"],[1,"project-status-pill"],[1,"status-prefix"],[1,"status-level"],["class","project-status-tags",4,"ngIf"],[1,"project-technologies"],[1,"project-description"],["tabindex","0","role","region",1,"description-content",3,"scroll"],[1,"project-details-bar"],[1,"project-detail"],[3,"ngSwitch"],["class","project-detail-anchor","target","_blank","rel","noopener noreferrer",3,"href",4,"ngSwitchCase"],["class","project-detail-label",4,"ngSwitchCase"],["class","project-detail-label is-muted",4,"ngSwitchDefault"],[4,"ngIf","ngIfElse"],[1,"project-status-tags"],["class","status-tag",4,"ngFor","ngForOf"],[1,"status-tag"],["target","_blank","rel","noopener noreferrer",1,"project-detail-anchor",3,"href"],[1,"project-detail-label"],[1,"project-detail-label","is-muted"]],template:function(e,n){e&1&&d(0,je,8,3,"section",5),e&2&&c("ngIf",!n.isLoading)},dependencies:[K,N,Q,J,q,W,G],styles:[".carousel-container[_ngcontent-%COMP%]{width:100%;max-width:480px;margin:0 auto;display:flex;flex-direction:column;gap:1.1rem;padding-inline:clamp(.5rem,5vw,1.5rem);box-sizing:border-box}.carousel-viewport[_ngcontent-%COMP%]{display:flex;width:100%;overflow-x:auto;overflow-y:visible;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scrollbar-width:none;mask-image:linear-gradient(90deg,transparent 0,rgba(0,0,0,.35) 16px,rgb(0,0,0) 56px,rgb(0,0,0) calc(100% - 56px),rgba(0,0,0,.35) calc(100% - 16px),transparent 100%);padding-block:.25rem;scroll-padding-inline:clamp(1rem,7vw,2rem)}.carousel-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.carousel-wrapper[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:100%;gap:clamp(.75rem,4vw,1.25rem);padding-inline:clamp(1rem,6vw,2rem);width:100%;transition:transform .6s ease}.carousel-item[_ngcontent-%COMP%]{scroll-snap-align:center;scroll-snap-stop:always;display:flex;justify-content:center}.carousel-container.is-peeking[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_peek-next 2s ease-in-out 1}@keyframes _ngcontent-%COMP%_peek-next{0%{transform:translate(0)}30%{transform:translate(0)}55%{transform:translate(-14%)}75%{transform:translate(-14%)}to{transform:translate(0)}}@media (max-width: 768px){.project-cards[_ngcontent-%COMP%]{display:none}}"]})};export{ee as a};
