import{a as Z}from"./chunk-RR7NRF3U.js";import{M as Y}from"./chunk-EFEFSTFQ.js";import{Ab as a,Bc as K,Ca as V,Dc as X,Eb as D,Fb as M,Gb as A,Jb as b,Kb as p,Lb as _,Mb as u,Qa as x,Qb as U,Sa as H,Sb as R,T as S,Va as o,Wa as P,Xb as T,a as w,b as I,da as B,dc as z,ib as d,j as $,lb as g,ma as v,mb as c,na as h,ob as y,rb as s,rc as N,sb as l,sc as Q,tb as E,tc as q,ub as j,uc as W,vb as C,vc as G,wb as O,xb as L,xc as J,zb as k}from"./chunk-TMFWBCG6.js";var ie=["projectsSection"],ne=["descriptionContent"],te=(i,t)=>({$implicit:i,index:t});function oe(i,t){i&1&&O(0)}function re(i,t){if(i&1&&(s(0,"div",16),d(1,oe,1,0,"ng-container",17),l()),i&2){let e=t.$implicit,n=t.index;a(2);let r=b(9);g("aria-label",e.title),o(),c("ngTemplateOutlet",r)("ngTemplateOutletContext",R(3,te,e,n))}}function se(i,t){if(i&1){let e=L();s(0,"div",12)(1,"div",13),k("scroll",function(){v(e);let r=a(2);return h(r.handleCarouselInteraction())})("touchstart",function(){v(e);let r=a(2);return h(r.handleCarouselInteraction())})("mousedown",function(){v(e);let r=a(2);return h(r.handleCarouselInteraction())}),s(2,"div",14),d(3,re,2,6,"div",15),l()()()}if(i&2){let e=a(2);y("is-peeking",e.shouldPeek),o(),g("aria-label",e.projects.title),o(2),c("ngForOf",e.projects.projects)}}function ae(i,t){i&1&&O(0)}function le(i,t){if(i&1&&(j(0),d(1,ae,1,0,"ng-container",17),C()),i&2){let e=t.$implicit,n=t.index;a(2);let r=b(9);o(),c("ngTemplateOutlet",r)("ngTemplateOutletContext",R(2,te,e,n))}}function ce(i,t){if(i&1&&(s(0,"div",18),d(1,le,2,5,"ng-container",19),l()),i&2){let e=a(2);o(),c("ngForOf",e.projects.projects)}}function pe(i,t){if(i&1&&(s(0,"li",42),p(1),l()),i&2){let e=t.$implicit,n=a(4);o(),u(" ",n.getStatusTagLabel(e)," ")}}function me(i,t){if(i&1&&(s(0,"ul",40),d(1,pe,2,1,"li",41),l()),i&2){let e=a().$implicit;o(),c("ngForOf",e.status.tags)}}function de(i,t){if(i&1&&(s(0,"a",43),p(1),l()),i&2){let e=a().$implicit,n=a(2);c("href",n.getCodeUrl(e.links),x),o(),u(" ",n.projects.linksLegend.code.availableLabel," ")}}function ue(i,t){if(i&1&&(s(0,"span",44),p(1),l()),i&2){let e=a(3);o(),u(" ",e.projects.linksLegend.code.privateLabel," ")}}function _e(i,t){if(i&1&&(s(0,"span",45),p(1),l()),i&2){let e=a(3);o(),u(" ",e.projects.linksLegend.code.unavailableLabel," ")}}function ge(i,t){if(i&1&&(j(0),s(1,"a",43),p(2),l(),C()),i&2){let e=a().$implicit,n=a(2);o(),c("href",n.getSiteUrl(e.links),x),o(),u(" ",n.projects.linksLegend.preview.siteLabel," ")}}function fe(i,t){if(i&1&&(j(0),s(1,"a",43),p(2),l(),C()),i&2){let e=a(2).$implicit,n=a(2);o(),c("href",n.getDemoUrl(e.links),x),o(),u(" ",n.projects.linksLegend.preview.demoLabel," ")}}function ve(i,t){if(i&1&&d(0,fe,3,2,"ng-container",39),i&2){let e=a().$implicit,n=b(31),r=a(2);c("ngIf",r.hasAvailableDemo(e.links))("ngIfElse",n)}}function he(i,t){if(i&1&&(s(0,"span",45),p(1),l()),i&2){let e=a(3);o(),u(" ",e.projects.linksLegend.preview.unavailableLabel," ")}}function xe(i,t){if(i&1){let e=L();s(0,"article",20)(1,"div",21),E(2,"img",22),l(),s(3,"div",23)(4,"h3",24),p(5),l(),s(6,"div",25)(7,"span",26)(8,"span",27),p(9),l(),s(10,"span",28),p(11),l()(),d(12,me,2,1,"ul",29),l()(),s(13,"p",30),p(14),l(),s(15,"div",31)(16,"div",32,2),k("scroll",function(r){let m=v(e).$implicit,f=a(2);return h(f.onDescriptionScroll(m,r))}),s(18,"p"),p(19),l()()(),s(20,"div",33)(21,"div",34),j(22,35),d(23,de,2,2,"a",36)(24,ue,2,1,"span",37)(25,_e,2,1,"span",38),C(),l(),s(26,"div",34),d(27,ge,3,2,"ng-container",39)(28,ve,1,2,"ng-template",null,3,T)(30,he,2,1,"ng-template",null,4,T),l()()()}if(i&2){let e=t.$implicit,n=t.index,r=b(29),m=a(2);g("data-status-level",e.status.level),o(2),c("src",e.image,x),g("alt",m.projects.imageAltPrefix+e.title),o(3),_(e.title),o(4),_(m.projects.statusLegend.prefix),o(2),_(m.getStatusLevelLabel(e.status.level)),o(),c("ngIf",e.status.tags==null?null:e.status.tags.length),o(2),_(e.technologies.join(" \xB7 ")),o(),y("is-scrollable",e.isScrollable)("is-at-end",e.isAtEnd),o(),g("id","project-description-"+n)("aria-label",e.title+" \u2014 dettagli"),o(3),_(e.description),o(3),c("ngSwitch",m.getCodeState(e.links)),o(),c("ngSwitchCase","available"),o(),c("ngSwitchCase","private"),o(3),c("ngIf",m.hasAvailableSite(e.links))("ngIfElse",r)}}function je(i,t){if(i&1&&(s(0,"section",6,0)(2,"header",7),E(3,"span",8),s(4,"h2",9),p(5),l()(),d(6,se,4,4,"div",10)(7,ce,2,1,"div",11)(8,xe,32,20,"ng-template",null,1,T),l()),i&2){let e=a();o(5),_(e.projects.title),o(),c("ngIf",e.isMobile),o(),c("ngIf",!e.isMobile)}}var ee=class i{constructor(t,e,n){this.translationService=t;this.platformId=e;this.cdr=n;this.isBrowser=X(this.platformId)}projects={title:"",button:"",imageAltPrefix:"",toggle:{expand:"",collapse:""},navigation:{previous:"",next:""},statusLegend:{prefix:"",levels:{active:"",publicBeta:"",inDevelopment:""},tags:{openSource:"",release2024:""}},linksLegend:{code:{availableLabel:"",privateLabel:"",unavailableLabel:""},preview:{siteLabel:"",demoLabel:"",unavailableLabel:""}},projects:[]};isMobile=!1;isLoading=!0;shouldPeek=!1;descriptionContents;set projectsSectionRef(t){this.projectsSection=t??null,this.setupPeekObserver()}peekStartTimeoutId=null;peekStopTimeoutId=null;scrollComputationTimeoutId=null;scrollComputationPending=!1;projectsSection=null;peekObserver=null;lastPeekTimestamp=0;peekAnimationDuration=2e3;isBrowser;destroy$=new $;ngOnInit(){this.isBrowser&&this.checkIfMobile(),this.translationService.currentLanguage$.pipe(S(this.destroy$)).subscribe(()=>{this.isLoading=!0}),this.translationService.getTranslatedData(Z).pipe(S(this.destroy$)).subscribe(t=>{this.projects=I(w({},t),{projects:t.projects.map(e=>I(w({},e),{isScrollable:!1,isAtEnd:!0}))}),this.isLoading=!1,this.scheduleScrollComputation(),this.setupPeekObserver()})}ngAfterViewInit(){this.isBrowser&&(this.descriptionContents.changes.pipe(S(this.destroy$)).subscribe(()=>this.scheduleScrollComputation()),this.scheduleScrollComputation(),this.setupPeekObserver())}ngOnDestroy(){this.clearPeekTimers(),this.scrollComputationTimeoutId&&(clearTimeout(this.scrollComputationTimeoutId),this.scrollComputationTimeoutId=null),this.peekObserver&&(this.peekObserver.disconnect(),this.peekObserver=null),this.destroy$.next(),this.destroy$.complete()}onResize(){this.isBrowser&&(this.checkIfMobile(),this.scheduleScrollComputation(),this.setupPeekObserver())}checkIfMobile(){this.isMobile=window.innerWidth<=768}onDescriptionScroll(t,e){if(!this.isBrowser)return;let n=e.target,r=n.scrollTop+n.clientHeight>=n.scrollHeight-1;t.isAtEnd=r}handleCarouselInteraction(){this.clearPeekTimers(),this.shouldPeek&&(this.shouldPeek=!1),this.lastPeekTimestamp=Date.now()}getStatusLevelLabel(t){let e=this.projects.statusLegend.levels[t];return e?.trim()?e:t}getStatusTagLabel(t){let e=this.projects.statusLegend.tags[t];return e?.trim()?e:t}triggerPeekAnimation(){if(!this.isBrowser||!this.isMobile||(this.projects.projects?.length??0)<=1)return;let t=Date.now();this.shouldPeek||t-this.lastPeekTimestamp<this.peekAnimationDuration||(this.clearPeekTimers(),this.shouldPeek=!1,this.peekStartTimeoutId=setTimeout(()=>{this.shouldPeek=!0,this.lastPeekTimestamp=Date.now(),this.peekStopTimeoutId=setTimeout(()=>{this.shouldPeek=!1,this.peekStopTimeoutId=null},this.peekAnimationDuration),this.peekStartTimeoutId=null},120))}clearPeekTimers(){this.peekStartTimeoutId&&(clearTimeout(this.peekStartTimeoutId),this.peekStartTimeoutId=null),this.peekStopTimeoutId&&(clearTimeout(this.peekStopTimeoutId),this.peekStopTimeoutId=null)}getCodeState(t){let e=t?.code;return!e||e.state==="available"&&!e.url?"unavailable":e.state}getCodeUrl(t){let e=t?.code;return e?.state==="available"&&e.url?e.url:void 0}hasAvailableSite(t){let e=t?.site;return!!e&&e.state==="available"&&!!e.url}getSiteUrl(t){return this.hasAvailableSite(t)?t?.site?.url:void 0}hasAvailableDemo(t){let e=t?.demo;return!!e&&e.state==="available"&&!!e.url}getDemoUrl(t){return this.hasAvailableDemo(t)?t?.demo?.url:void 0}setupPeekObserver(){if(!this.isBrowser)return;this.peekObserver&&(this.peekObserver.disconnect(),this.peekObserver=null);let t=this.projectsSection,e=(this.projects.projects?.length??0)>1;if(!t||!this.isMobile||!e){this.clearPeekTimers(),this.shouldPeek&&(this.shouldPeek=!1);return}this.peekObserver=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&this.triggerPeekAnimation()})},{threshold:.4}),this.peekObserver.observe(t.nativeElement)}scheduleScrollComputation(){this.isBrowser&&(this.scrollComputationPending&&this.scrollComputationTimeoutId||(this.scrollComputationPending=!0,this.scrollComputationTimeoutId=setTimeout(()=>{this.scrollComputationPending=!1,this.scrollComputationTimeoutId=null,this.computeScrollableStates()})))}computeScrollableStates(){if(!this.isBrowser||!this.descriptionContents)return;let t=this.projects.projects??[];this.descriptionContents.forEach((e,n)=>{let r=e.nativeElement,m=t[n];if(!m)return;let f=r.scrollHeight-r.clientHeight>2,F=!f||r.scrollTop+r.clientHeight>=r.scrollHeight-1;(m.isScrollable!==f||m.isAtEnd!==F)&&(m.isScrollable=f,m.isAtEnd=F)}),this.cdr.markForCheck()}static \u0275fac=function(e){return new(e||i)(P(Y),P(V),P(z))};static \u0275cmp=B({type:i,selectors:[["app-projects"]],viewQuery:function(e,n){if(e&1&&(D(ie,5),D(ne,5)),e&2){let r;M(r=A())&&(n.projectsSectionRef=r.first),M(r=A())&&(n.descriptionContents=r)}},hostBindings:function(e,n){e&1&&k("resize",function(){return n.onResize()},!1,H)},standalone:!0,features:[U],decls:1,vars:1,consts:[["projectsSection",""],["projectCard",""],["descriptionContent",""],["checkDemo",""],["previewUnavailable",""],["class","projects-section",4,"ngIf"],[1,"projects-section"],[1,"projects-header","section-heading"],["aria-hidden","true",1,"statistics-title-accent"],[1,"projects-title"],["class","carousel-container",3,"is-peeking",4,"ngIf"],["class","project-cards",4,"ngIf"],[1,"carousel-container"],["role","listbox","tabindex","0",1,"carousel-viewport",3,"scroll","touchstart","mousedown"],[1,"carousel-wrapper"],["class","carousel-item","role","option",4,"ngFor","ngForOf"],["role","option",1,"carousel-item"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"project-cards"],[4,"ngFor","ngForOf"],[1,"project-card"],[1,"project-visual"],[1,"proj-image",3,"src"],[1,"project-header"],[1,"project-title"],[1,"project-status-wrapper"],[1,"project-status-pill"],[1,"status-prefix"],[1,"status-level"],["class","project-status-tags",4,"ngIf"],[1,"project-technologies"],[1,"project-description"],["tabindex","0","role","region",1,"description-content",3,"scroll"],[1,"project-details-bar"],[1,"project-detail"],[3,"ngSwitch"],["class","project-detail-anchor","target","_blank","rel","noopener noreferrer",3,"href",4,"ngSwitchCase"],["class","project-detail-label",4,"ngSwitchCase"],["class","project-detail-label is-muted",4,"ngSwitchDefault"],[4,"ngIf","ngIfElse"],[1,"project-status-tags"],["class","status-tag",4,"ngFor","ngForOf"],[1,"status-tag"],["target","_blank","rel","noopener noreferrer",1,"project-detail-anchor",3,"href"],[1,"project-detail-label"],[1,"project-detail-label","is-muted"]],template:function(e,n){e&1&&d(0,je,10,3,"section",5),e&2&&c("ngIf",!n.isLoading)},dependencies:[K,N,Q,J,q,W,G],styles:[".carousel-container[_ngcontent-%COMP%]{width:100%;max-width:480px;margin:0 auto;display:flex;flex-direction:column;gap:1.1rem;padding-inline:clamp(.5rem,5vw,1.5rem);box-sizing:border-box}.carousel-viewport[_ngcontent-%COMP%]{display:flex;width:100%;overflow-x:auto;overflow-y:visible;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scrollbar-width:none;mask-image:linear-gradient(90deg,transparent 0,rgba(0,0,0,.35) 16px,rgb(0,0,0) 56px,rgb(0,0,0) calc(100% - 56px),rgba(0,0,0,.35) calc(100% - 16px),transparent 100%);padding-block:.25rem;scroll-padding-inline:clamp(1rem,7vw,2rem)}.carousel-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.carousel-wrapper[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:100%;gap:clamp(.75rem,4vw,1.25rem);padding-inline:clamp(1rem,6vw,2rem);width:100%;transition:transform .6s ease}.carousel-item[_ngcontent-%COMP%]{scroll-snap-align:center;scroll-snap-stop:always;display:flex;justify-content:center}.carousel-container.is-peeking[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_peek-next 2s ease-in-out 1}@keyframes _ngcontent-%COMP%_peek-next{0%{transform:translate(0)}30%{transform:translate(0)}55%{transform:translate(-14%)}75%{transform:translate(-14%)}to{transform:translate(0)}}@media (max-width: 768px){.project-cards[_ngcontent-%COMP%]{display:none}}"]})};export{ee as a};
