import{R as Z,o as Y}from"./chunk-Y4MUPGWH.js";import{Ab as c,Ac as $,Ca as D,Dc as J,Eb as _,Fb as k,Fc as X,Gb as T,Kb as d,Lb as h,Mb as L,Qb as U,Sa as G,U as I,Ub as F,Va as s,Vb as W,Wa as f,a as M,b as j,da as H,ib as y,k as R,lb as B,ma as g,mb as b,na as v,oa as z,ob as S,r as E,rb as a,s as O,sb as o,tb as p,tc as K,ub as q,uc as Q,va as C,vb as N,xb as P,y as A,ya as V,z as x,zb as m}from"./chunk-HAG4GGGH.js";var ie=["avatar"],ne=["popup"],ae=["guideScrollArea"];function se(r,e){if(r&1&&(a(0,"li"),d(1),o()),r&2){let t=e.$implicit;s(),h(t)}}function oe(r,e){if(r&1){let t=P();a(0,"div",19,1)(2,"div",20)(3,"h3",21),d(4),o()(),a(5,"div",22)(6,"div",23,2),m("scroll",function(){g(t);let n=c(2);return v(n.onGuideContentScroll())}),a(8,"p",24),d(9),o(),a(10,"ol",25),y(11,se,2,1,"li",26),o(),a(12,"p",27),d(13),o(),a(14,"div",28)(15,"a",29),m("click",function(){g(t);let n=c(2);return v(n.onNavigateToPrivacy())}),d(16),o(),a(17,"p",30),d(18),o()()()()()}if(r&2){let t=c().ngIf,i=c();s(4),h(t.title),s(),S("assistant__content--scrollable",i.guideScrollState.isScrollable)("assistant__content--at-end",i.guideScrollState.isAtEnd),s(4),h(t.intro),s(2),b("ngForOf",t.steps),s(),S("assistant__closing--active",i.animationPhase==="wondering"),s(),L(" ",t.closingHint," "),s(3),L(" ",t.privacyLinkLabel," "),s(2),h(t.privacyLinkDescription)}}function re(r,e){if(r&1&&(q(0),y(1,oe,19,12,"div",18),N()),r&2){let t=c();s(),b("ngIf",t.isOpen)}}var le=450,pe=1400,de=2400,ce=980,ee={de:{title:"Schnellguide zum Portfolio",closingHint:"Wenn du fertig bist, kannst du mich schlie\xDFen \u2013 die Anleitung bleibt immer nur einen Klick entfernt.",privacyLink:{label:"Datenschutzhinweise lesen",description:"Alle Details zu Cookies, personenbezogenen Daten und Kontaktm\xF6glichkeiten findest du auf der Datenschutzseite."},desktop:{intro:"Du nutzt das Portfolio am Desktop? So navigierst du komfortabel durch die neuen Seiten.",steps:["Die fixierte Topbar bleibt stets sichtbar \u2013 nutze Home, Projekte, F\xE4higkeiten, Erfahrungen und Kontakt, um zwischen den Seiten zu wechseln.","Scrolle frei durch jede Seite; die Topbar folgt dir, sodass du jederzeit die Sektion wechseln kannst.","\xDCber die Men\xFCs Sprache und Thema stellst du \xDCbersetzung und Farbschema nach Wunsch ein.","Alle Inhalte der Startseite findest du auch auf den Unterseiten in einer \xFCbersichtlichen vertikalen Darstellung.","Im Bereich Kennzahlen \xF6ffnet jede Karte einen Dialog mit Details zur Berechnung."]},mobile:{intro:"Auf dem Smartphone sorgt eine kompakte Topbar f\xFCr \xDCbersicht \u2013 so verwendest du sie.",steps:["\xD6ffne das Seitenmen\xFC \xFCber den neuen Button oben rechts und w\xE4hle die gew\xFCnschte Ansicht.","Die Topbar bleibt oben angeheftet; nach dem Antippen schlie\xDFt sich das Men\xFC automatisch.","Sprache und Thema findest du im selben Men\xFC \u2013 passe \xDCbersetzung und Farbstil in Sekunden an.","Die Seiten sind f\xFCr vertikales Scrollen optimiert, also streiche bequem durch die Inhalte.","Im Bereich Kennzahlen kannst du jede Karte antippen, um einen Dialog mit weiteren Details zu \xF6ffnen."]}},it:{title:"Guida rapida al portfolio",closingHint:"Quando hai finito, puoi richiudermi: rimango sempre a portata di click.",privacyLink:{label:"Leggi l'informativa privacy",description:"Trovi tutti i dettagli su cookie, dati personali e canali di contatto nella pagina dedicata."},desktop:{intro:"Se stai usando il portfolio da PC, ecco come sfruttare la nuova navigazione.",steps:["La topbar fissa resta sempre visibile: usa Home, Progetti, Competenze, Esperienze e Contatti per raggiungere le pagine dedicate.","Puoi scorrere liberamente ogni pagina: la topbar ti segue cos\xEC puoi cambiare sezione in qualsiasi momento.","Nel menu della lingua scegli la traduzione preferita; il selettore Tema cambia la palette di colori.","Le stesse informazioni della landing sono disponibili anche nelle pagine dedicate, organizzate in verticale.","Nella sezione Numeri chiave ogni card \xE8 cliccabile e apre un dialog con dettagli sul calcolo del numero corrispondente."]},mobile:{intro:"Su smartphone trovi una topbar compatta: ecco come usarla al meglio.",steps:["Apri il menu pagine con il nuovo pulsante in alto a destra e scegli la vista che vuoi visitare.","La topbar resta fissata in alto: dopo aver toccato una voce il menu si richiude automaticamente.","Gli switch di lingua e tema si trovano nello stesso menu: seleziona la combinazione che preferisci.","Ogni pagina \xE8 ottimizzata per lo scorrimento verticale, quindi puoi navigare con un semplice swipe.","Le card dei Numeri chiave sono interattive: toccale per leggere le spiegazioni dettagliate."]}},en:{title:"Quick guide to the portfolio",closingHint:"Close me once you are ready\u2014your guide will stay one click away.",privacyLink:{label:"Read the privacy notice",description:"Head over to the dedicated page to review cookies, data usage and how to get in touch."},desktop:{intro:"Browsing from a desktop? Here's how to make the most of the new navigation.",steps:["The fixed top bar stays visible at all times\u2014use Home, Projects, Skills, Experiences and Contacts to jump between dedicated pages.","Scroll freely within each page; the top bar follows you so you can switch section whenever you like.","Use the Language menu to pick your preferred translation and the Theme selector to change the colour palette.","Every page reprises the landing content in a vertical layout, so you can explore each topic at your own pace.","In the Key numbers section each card opens a dialog with details about how the metric is calculated."]},mobile:{intro:"On mobile you get a compact top bar\u2014follow these quick tips.",steps:["Open the pages menu with the new button in the upper-right corner and pick the view you need.","The top bar stays fixed at the top; after tapping an item the menu closes automatically.","Language and Theme selectors live in the same menu so you can adjust style and translation instantly.","Every page is optimised for vertical scrolling, so swipe through the content just like a standard app.","Key numbers cards remain interactive: tap them to read the detailed explanations."]}},no:{title:"Hurtigguide til portef\xF8ljen",closingHint:"N\xE5r du er ferdig kan du lukke meg \u2013 guiden ligger alltid ett klikk unna.",privacyLink:{label:"Les personvernerkl\xE6ringen",description:"P\xE5 den dedikerte siden finner du detaljer om cookies, databruk og kontaktpunkter."},desktop:{intro:"Bruker du portef\xF8ljen p\xE5 PC? Slik f\xE5r du mest ut av den nye navigasjonen.",steps:["Den fastl\xE5ste topplinjen er alltid synlig \u2013 bruk Hjem, Prosjekter, Kompetanser, Erfaringer og Kontakt for \xE5 hoppe mellom sidene.","Du kan bla fritt p\xE5 hver side; topplinjen f\xF8lger deg slik at du kan bytte seksjon n\xE5r som helst.","Spr\xE5k- og temavelgerne lar deg endre oversettelse og fargepalett etter behov.","Innholdet fra landingssiden finnes ogs\xE5 p\xE5 de dedikerte sidene i et ryddig vertikalt oppsett.","I seksjonen N\xF8kkeltall kan du \xE5pne et dialogvindu fra hver kort for \xE5 lese hvordan tallet er beregnet."]},mobile:{intro:"P\xE5 mobil f\xE5r du en kompakt topplinje \u2013 f\xF8lg disse tipsene.",steps:["\xC5pne sidenmenyen med den nye knappen \xF8verst til h\xF8yre og velg visningen du trenger.","Topplinjen blir liggende \xF8verst; menyen lukkes automatisk etter at du har trykket p\xE5 et element.","Spr\xE5k- og temavalgene ligger i den samme menyen, s\xE5 du kan endre stil og spr\xE5k med et trykk.","Hver side er tilpasset vertikal scrolling, s\xE5 sveip gjennom innholdet som i en vanlig app.","I N\xF8kkeltall er hvert kort interaktivt \u2013 trykk for \xE5 lese de detaljerte forklaringene."]}},ru:{title:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0441\u0442\u0432\u043E \u043F\u043E \u043F\u043E\u0440\u0442\u0444\u043E\u043B\u0438\u043E",closingHint:"\u041A\u043E\u0433\u0434\u0430 \u0431\u0443\u0434\u0435\u0442\u0435 \u0433\u043E\u0442\u043E\u0432\u044B, \u043F\u0440\u043E\u0441\u0442\u043E \u0437\u0430\u043A\u0440\u043E\u0439\u0442\u0435 \u043C\u0435\u043D\u044F \u2014 \u043F\u043E\u043C\u043E\u0449\u043D\u0438\u043A \u0432\u0441\u0435\u0433\u0434\u0430 \u0432 \u043E\u0434\u043D\u043E\u043C \u043A\u043B\u0438\u043A\u0435.",privacyLink:{label:"\u041E\u0437\u043D\u0430\u043A\u043E\u043C\u044C\u0442\u0435\u0441\u044C \u0441 \u043F\u043E\u043B\u0438\u0442\u0438\u043A\u043E\u0439 \u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438",description:"\u041D\u0430 \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u044B cookies, \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u0438 \u0441\u043F\u043E\u0441\u043E\u0431\u044B \u0441\u0432\u044F\u0437\u0438."},desktop:{intro:"\u041F\u0440\u043E\u0441\u043C\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u0442\u0435 \u043F\u043E\u0440\u0442\u0444\u043E\u043B\u0438\u043E \u0441 \u043A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u0430? \u0412\u043E\u0442 \u043A\u0430\u043A \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D\u043D\u0443\u044E \u043D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044E.",steps:["\u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0432\u0435\u0440\u0445\u043D\u044F\u044F \u043F\u0430\u043D\u0435\u043B\u044C \u0432\u0441\u0435\u0433\u0434\u0430 \u043E\u0441\u0442\u0430\u0451\u0442\u0441\u044F \u043D\u0430 \u0432\u0438\u0434\u0443: \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0443\u043D\u043A\u0442\u044B \xAB\u0413\u043B\u0430\u0432\u043D\u0430\u044F\xBB, \xAB\u041F\u0440\u043E\u0435\u043A\u0442\u044B\xBB, \xAB\u041D\u0430\u0432\u044B\u043A\u0438\xBB, \xAB\u041E\u043F\u044B\u0442\xBB \u0438 \xAB\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u044B\xBB, \u0447\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0438\u0442\u044C \u043C\u0435\u0436\u0434\u0443 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430\u043C\u0438.","\u041F\u0440\u043E\u043A\u0440\u0443\u0447\u0438\u0432\u0430\u0439\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043A\u0430\u043A \u043E\u0431\u044B\u0447\u043D\u043E \u2014 \u0442\u043E\u043F\u0431\u0430\u0440 \u043E\u0441\u0442\u0430\u0451\u0442\u0441\u044F \u0437\u0430\u043A\u0440\u0435\u043F\u043B\u0451\u043D\u043D\u044B\u043C, \u043F\u043E\u044D\u0442\u043E\u043C\u0443 \u0441\u043C\u0435\u043D\u0438\u0442\u044C \u0440\u0430\u0437\u0434\u0435\u043B \u043C\u043E\u0436\u043D\u043E \u0432 \u043B\u044E\u0431\u043E\u0439 \u043C\u043E\u043C\u0435\u043D\u0442.","\u0412 \u043C\u0435\u043D\u044E \u044F\u0437\u044B\u043A\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043D\u0443\u0436\u043D\u0443\u044E \u043B\u043E\u043A\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044E, \u0430 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C \u0442\u0435\u043C\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442 \u0446\u0432\u0435\u0442\u043E\u0432\u0443\u044E \u043F\u0430\u043B\u0438\u0442\u0440\u0443.","\u0412\u0441\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B \u0438\u0437 \u043B\u0435\u043D\u0434\u0438\u043D\u0433\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0438 \u043D\u0430 \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0445 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430\u0445 \u0432 \u0443\u0434\u043E\u0431\u043D\u043E\u043C \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E\u043C \u0444\u043E\u0440\u043C\u0430\u0442\u0435.","\u0412 \u0440\u0430\u0437\u0434\u0435\u043B\u0435 \xAB\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438\xBB \u043A\u0430\u0436\u0434\u0430\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0435\u0442 \u0434\u0438\u0430\u043B\u043E\u0433 \u0441 \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u043E\u0441\u0442\u044F\u043C\u0438 \u0440\u0430\u0441\u0447\u0451\u0442\u0430."]},mobile:{intro:"\u041D\u0430 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0445 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\u0445 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430 \u043A\u043E\u043C\u043F\u0430\u043A\u0442\u043D\u0430\u044F \u0432\u0435\u0440\u0445\u043D\u044F\u044F \u043F\u0430\u043D\u0435\u043B\u044C \u2014 \u0432\u043E\u0442 \u043A\u0430\u043A \u0435\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F.",steps:["\u041E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u043C\u0435\u043D\u044E \u0441\u0442\u0440\u0430\u043D\u0438\u0446 \u043D\u043E\u0432\u043E\u0439 \u043A\u043D\u043E\u043F\u043A\u043E\u0439 \u0432 \u043F\u0440\u0430\u0432\u043E\u043C \u0432\u0435\u0440\u0445\u043D\u0435\u043C \u0443\u0433\u043B\u0443 \u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043D\u0443\u0436\u043D\u044B\u0439 \u0440\u0430\u0437\u0434\u0435\u043B.","\u0422\u043E\u043F\u0431\u0430\u0440 \u043E\u0441\u0442\u0430\u0451\u0442\u0441\u044F \u0437\u0430\u043A\u0440\u0435\u043F\u043B\u0451\u043D\u043D\u044B\u043C \u0441\u0432\u0435\u0440\u0445\u0443; \u043F\u043E\u0441\u043B\u0435 \u043D\u0430\u0436\u0430\u0442\u0438\u044F \u043F\u0443\u043D\u043A\u0442 \u043C\u0435\u043D\u044E \u0437\u0430\u043A\u0440\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438.","\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u0438 \u044F\u0437\u044B\u043A\u0430 \u0438 \u0442\u0435\u043C\u044B \u043D\u0430\u0445\u043E\u0434\u044F\u0442\u0441\u044F \u0432 \u0442\u043E\u043C \u0436\u0435 \u043C\u0435\u043D\u044E, \u043F\u043E\u044D\u0442\u043E\u043C\u0443 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0442\u0438\u043B\u044C \u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434 \u043C\u043E\u0436\u043D\u043E \u043C\u0433\u043D\u043E\u0432\u0435\u043D\u043D\u043E.","\u041A\u0430\u0436\u0434\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043E\u043F\u0442\u0438\u043C\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u043F\u043E\u0434 \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u0443\u044E \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0443 \u2014 \u043F\u0440\u043E\u0441\u0442\u043E \u043F\u0440\u043E\u043B\u0438\u0441\u0442\u044B\u0432\u0430\u0439\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0436\u0435\u0441\u0442\u0430\u043C\u0438.","\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0440\u0430\u0437\u0434\u0435\u043B\u0430 \xAB\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438\xBB \u0438\u043D\u0442\u0435\u0440\u0430\u043A\u0442\u0438\u0432\u043D\u044B: \u043D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0443\u0432\u0438\u0434\u0435\u0442\u044C \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u044B\u0435 \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F."]}},es:{title:"Gu\xEDa r\xE1pida del portafolio",closingHint:"Cuando termines, puedes cerrarme: la gu\xEDa siempre estar\xE1 a un clic.",privacyLink:{label:"Lee el aviso de privacidad",description:"En la p\xE1gina dedicada encontrar\xE1s todos los detalles sobre cookies, datos personales y canales de contacto."},desktop:{intro:"\xBFUsas el portafolio desde el ordenador? As\xED aprovechas la nueva navegaci\xF3n.",steps:["La topbar fija permanece siempre visible: usa Inicio, Proyectos, Competencias, Experiencias y Contactos para saltar entre las p\xE1ginas.","Puedes desplazarte libremente por cada p\xE1gina; la topbar te acompa\xF1a para que cambies de secci\xF3n cuando quieras.","El selector de idioma y el de tema te permiten ajustar la traducci\xF3n y la paleta de colores al instante.","El contenido de la landing tambi\xE9n est\xE1 disponible en las p\xE1ginas dedicadas con un dise\xF1o vertical y c\xF3modo.","En la secci\xF3n N\xFAmeros clave cada tarjeta abre un di\xE1logo con detalles sobre c\xF3mo se calcula la cifra."]},mobile:{intro:"En el m\xF3vil tienes una barra superior compacta: sigue estos consejos.",steps:["Abre el men\xFA de p\xE1ginas con el nuevo bot\xF3n en la esquina superior derecha y elige la vista que necesitas.","La topbar queda fija arriba; despu\xE9s de tocar una opci\xF3n el men\xFA se cierra autom\xE1ticamente.","Los selectores de idioma y tema est\xE1n en el mismo men\xFA, as\xED puedes cambiar estilo y traducci\xF3n al instante.","Cada p\xE1gina est\xE1 optimizada para el desplazamiento vertical, as\xED que desliza el contenido como en cualquier app.","Las tarjetas de N\xFAmeros clave siguen siendo interactivas: t\xF3calas para leer las explicaciones detalladas."]}}},te=class r{constructor(e,t,i){this.translationService=e;this.hostRef=t;this.isBrowser=X(i);let n=this.translationService.getTranslatedData(ee,"it").pipe(E(l=>l??ee.it));this.guideContent$=O([n,this.isMobileSubject.asObservable()]).pipe(E(([l,w])=>{let u=w?l.mobile:l.desktop;return{title:l.title,closingHint:l.closingHint,intro:u.intro,steps:u.steps,privacyLinkLabel:l.privacyLink.label,privacyLinkDescription:l.privacyLink.description}}),I(()=>this.requestGuideScrollEvaluation()))}opened=new C;closed=new C;isOpen=!1;animationPhase="sleeping";wakeTimer=null;jumpTimer=null;fallTimer=null;wonderingTimer=null;landingUpdateTimeout=null;guideScrollEvaluationTimeout=null;isMobileSubject=new R(!1);isMobile=!1;isBrowser;visualViewportSubscription;guideContent$;guideScrollState={isScrollable:!1,isAtEnd:!0};avatarRef;popupRef;guideScrollAreaRef;set popupElement(e){this.popupRef=e,e?this.requestLandingUpdate():this.cancelLandingUpdate()}set guideScrollArea(e){this.guideScrollAreaRef=e,e?this.requestGuideScrollEvaluation():(this.cancelGuideScrollEvaluation(),this.resetGuideScrollState())}ngOnInit(){this.isBrowser&&(this.updateMobileState(),this.registerVisualViewportListeners())}ngOnDestroy(){this.cancelLandingUpdate(),this.cancelGuideScrollEvaluation(),this.clearAllTimers(),this.isMobileSubject.complete(),this.clearMobileViewportMetrics(),this.visualViewportSubscription?.unsubscribe()}onAvatarClick(){if(this.isOpen){this.closeAssistant();return}!this.isOpen&&this.animationPhase==="sleeping"&&this.openAssistant()}openAssistant(){this.isOpen||this.animationPhase!=="sleeping"||(this.isOpen=!0,this.animationPhase="waking",this.updateMobileViewportMetrics(),this.requestLandingUpdate(),this.requestGuideScrollEvaluation(),this.startWakeSequence(),this.opened.emit())}closeAssistant(){!this.isOpen&&this.animationPhase==="sleeping"||this.goToSleep()}onNavigateToPrivacy(){this.closeAssistant()}startWakeSequence(){this.clearAllTimers(),this.wakeTimer=setTimeout(()=>{this.wakeTimer=null,this.animationPhase="jumping",this.jumpTimer=setTimeout(()=>{this.jumpTimer=null,this.startWonderingPhase()},pe)},le)}goToSleep(){let e=this.isOpen;this.animationPhase==="sleeping"||this.animationPhase==="falling"||this.startFallSequence(e)}onWindowResize(){this.isOpen&&this.requestLandingUpdate(),this.isBrowser&&this.updateMobileState(),this.requestGuideScrollEvaluation()}clearAllTimers(){this.clearWakeTimer(),this.clearJumpTimer(),this.clearFallTimer(),this.clearWonderingTimer()}updateMobileState(){let e=this.isMobile,t=window.innerWidth<=768;this.isMobile=t,this.isMobileSubject.next(t),t?this.updateMobileViewportMetrics():this.clearMobileViewportMetrics(),t||this.resetGuideScrollState(),e!==t&&this.handleViewportModeChange(),this.requestGuideScrollEvaluation()}clearWakeTimer(){this.wakeTimer&&(clearTimeout(this.wakeTimer),this.wakeTimer=null)}clearJumpTimer(){this.jumpTimer&&(clearTimeout(this.jumpTimer),this.jumpTimer=null)}clearFallTimer(){this.fallTimer&&(clearTimeout(this.fallTimer),this.fallTimer=null)}clearWonderingTimer(){this.wonderingTimer&&(clearTimeout(this.wonderingTimer),this.wonderingTimer=null)}requestLandingUpdate(){if(!this.isBrowser){this.updateLandingCoordinates();return}this.landingUpdateTimeout!==null&&clearTimeout(this.landingUpdateTimeout),this.landingUpdateTimeout=setTimeout(()=>{this.landingUpdateTimeout=null,this.updateLandingCoordinates()},16)}cancelLandingUpdate(){if(!this.isBrowser){this.landingUpdateTimeout=null;return}this.landingUpdateTimeout!==null&&(clearTimeout(this.landingUpdateTimeout),this.landingUpdateTimeout=null)}updateLandingCoordinates(){if(!this.isOpen||!this.popupRef||typeof window>"u")return;let e=this.avatarRef?.nativeElement,t=this.popupRef.nativeElement;if(!e)return;let i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),l=n.right-i.right,w=n.top-i.bottom+10,u=this.hostRef.nativeElement;u.style.setProperty("--assistant-jump-landing-x",`${l}px`),u.style.setProperty("--assistant-jump-landing-y",`${w}px`)}resetLandingCoordinates(){let e=this.hostRef.nativeElement;e.style.removeProperty("--assistant-jump-landing-x"),e.style.removeProperty("--assistant-jump-landing-y")}handleViewportModeChange(){this.isOpen||this.animationPhase!=="sleeping"?this.goToSleep():this.resetLandingCoordinates()}startFallSequence(e){this.clearWakeTimer(),this.clearJumpTimer(),this.clearFallTimer(),this.clearWonderingTimer(),this.cancelLandingUpdate(),this.cancelGuideScrollEvaluation(),this.resetGuideScrollState(),this.animationPhase="falling",this.isOpen=!1,this.fallTimer=setTimeout(()=>{this.fallTimer=null,this.resetLandingCoordinates(),this.animationPhase="sleeping",e&&this.closed.emit()},ce)}startWonderingPhase(){this.clearWonderingTimer(),this.animationPhase="wondering",this.wonderingTimer=setTimeout(()=>{this.wonderingTimer=null,this.isOpen&&this.animationPhase==="wondering"&&(this.animationPhase="perched")},de)}onGuideContentScroll(){if(!this.guideScrollAreaRef)return;let e=this.guideScrollAreaRef.nativeElement,t=Math.ceil(e.scrollTop+e.clientHeight)>=e.scrollHeight-1;this.guideScrollState.isAtEnd!==t&&(this.guideScrollState=j(M({},this.guideScrollState),{isAtEnd:t}))}requestGuideScrollEvaluation(){!this.isBrowser||!this.isOpen||!this.isMobile||(this.guideScrollEvaluationTimeout!==null&&clearTimeout(this.guideScrollEvaluationTimeout),this.guideScrollEvaluationTimeout=setTimeout(()=>{this.guideScrollEvaluationTimeout=null,this.evaluateGuideScrollState()},16))}cancelGuideScrollEvaluation(){this.guideScrollEvaluationTimeout!==null&&(clearTimeout(this.guideScrollEvaluationTimeout),this.guideScrollEvaluationTimeout=null)}evaluateGuideScrollState(){if(!this.guideScrollAreaRef||!this.isMobile){this.resetGuideScrollState();return}let e=this.guideScrollAreaRef.nativeElement,t=e.scrollHeight-e.clientHeight>1,i=t?Math.ceil(e.scrollTop+e.clientHeight)>=e.scrollHeight-1:!0;this.guideScrollState={isScrollable:t,isAtEnd:i}}resetGuideScrollState(){this.guideScrollState={isScrollable:!1,isAtEnd:!0}}registerVisualViewportListeners(){if(!this.isBrowser||typeof window.visualViewport>"u")return;let e=window.visualViewport;if(!e)return;let t=A(e,"resize"),i=A(e,"scroll");this.visualViewportSubscription=x(t,i).subscribe(()=>{this.updateMobileViewportMetrics(),this.isOpen&&(this.requestLandingUpdate(),this.requestGuideScrollEvaluation())})}updateMobileViewportMetrics(){if(!this.isBrowser||!this.isMobile)return;let e=this.getViewportHeight(),t=this.getAnchorFootprint(),i=this.getSafeAreaInsetBottom(),n=this.hostRef.nativeElement;n.style.setProperty("--assistant-mobile-viewport-height",`${e}px`),n.style.setProperty("--assistant-mobile-anchor-footprint",`${t}px`),n.style.setProperty("--assistant-mobile-safe-area-bottom",`${i}px`)}clearMobileViewportMetrics(){let e=this.hostRef.nativeElement;e.style.removeProperty("--assistant-mobile-viewport-height"),e.style.removeProperty("--assistant-mobile-anchor-footprint"),e.style.removeProperty("--assistant-mobile-safe-area-bottom")}getViewportHeight(){return this.isBrowser?window.visualViewport?.height??window.innerHeight:0}getAnchorFootprint(){if(!this.isBrowser)return 0;let e=this.avatarRef?.nativeElement.offsetHeight??0,t=this.getAssistantSpacing();return e+t}getAssistantSpacing(){if(!this.isBrowser)return 0;let e=window.getComputedStyle(this.hostRef.nativeElement),t=parseFloat(e.getPropertyValue("--assistant-spacing"));return Number.isFinite(t)?t:0}getSafeAreaInsetBottom(){if(!this.isBrowser)return 0;let e=window.getComputedStyle(document.documentElement),t=parseFloat(e.getPropertyValue("--assistant-safe-area-bottom"));return Number.isFinite(t)?t:0}static \u0275fac=function(t){return new(t||r)(f(Z),f(V),f(D))};static \u0275cmp=H({type:r,selectors:[["app-assistant"]],viewQuery:function(t,i){if(t&1&&(_(ie,7),_(ne,5),_(ae,5)),t&2){let n;k(n=T())&&(i.avatarRef=n.first),k(n=T())&&(i.popupElement=n.first),k(n=T())&&(i.guideScrollArea=n.first)}},hostBindings:function(t,i){t&1&&m("resize",function(){return i.onWindowResize()},!1,G)},outputs:{opened:"opened",closed:"closed"},standalone:!0,features:[U],decls:17,vars:19,consts:[["avatar",""],["popup",""],["guideScrollArea",""],[1,"assistant"],[1,"assistant__anchor"],["aria-hidden","true",1,"assistant__shadow"],["type","button","aria-haspopup","dialog",1,"assistant__avatar",3,"click"],["aria-hidden","true",1,"assistant__avatar-wave"],["viewBox","0 0 120 120","role","img","aria-hidden","true",1,"assistant__avatar-face"],["cx","60","cy","60","r","58",1,"assistant__avatar-outline"],[1,"assistant__avatar-eye","assistant__avatar-eye--left"],["cx","45","cy","52","r","8",1,"assistant__avatar-eye-open"],["d","M37 52 Q45 48 53 52",1,"assistant__avatar-eye-closed"],[1,"assistant__avatar-eye","assistant__avatar-eye--right"],["cx","75","cy","52","r","8",1,"assistant__avatar-eye-open"],["d","M67 52 Q75 48 83 52",1,"assistant__avatar-eye-closed"],["d","M40 78 C52 92 68 92 80 78",1,"assistant__avatar-smile"],[4,"ngIf"],["class","assistant__popup","id","assistant-popup","role","dialog","aria-modal","false","aria-live","polite",4,"ngIf"],["id","assistant-popup","role","dialog","aria-modal","false","aria-live","polite",1,"assistant__popup"],[1,"assistant__header"],[1,"assistant__title"],[1,"assistant__content"],[1,"assistant__content-scroll",3,"scroll"],[1,"assistant__intro"],[1,"assistant__steps"],[4,"ngFor","ngForOf"],[1,"assistant__closing"],[1,"assistant__privacy"],["routerLink","/privacy",1,"assistant__privacy-link",3,"click"],[1,"assistant__privacy-description"]],template:function(t,i){if(t&1){let n=P();a(0,"div",3)(1,"div",4),p(2,"span",5),a(3,"button",6,0),m("click",function(){return g(n),v(i.onAvatarClick())}),p(5,"span",7),z(),a(6,"svg",8),p(7,"circle",9),a(8,"g",10),p(9,"circle",11)(10,"path",12),o(),a(11,"g",13),p(12,"circle",14)(13,"path",15),o(),p(14,"path",16),o()()(),y(15,re,2,1,"ng-container",17),F(16,"async"),o()}t&2&&(S("assistant--open",i.isOpen)("assistant--phase-sleeping",i.animationPhase==="sleeping")("assistant--phase-waking",i.animationPhase==="waking")("assistant--phase-jumping",i.animationPhase==="jumping")("assistant--phase-wondering",i.animationPhase==="wondering")("assistant--phase-perched",i.animationPhase==="perched")("assistant--phase-falling",i.animationPhase==="falling"),s(3),B("aria-expanded",i.isOpen)("aria-controls",i.isOpen?"assistant-popup":null),s(12),b("ngIf",W(16,17,i.guideContent$)))},dependencies:[J,K,Q,$,Y],styles:[".assistant__privacy[_ngcontent-%COMP%]{margin-top:1.25rem;display:grid;gap:.5rem}.assistant__privacy-link[_ngcontent-%COMP%]{color:var(--navigator-accent, #7bf7ff);text-decoration:none;font-weight:600}.assistant__privacy-link[_ngcontent-%COMP%]:hover, .assistant__privacy-link[_ngcontent-%COMP%]:focus{text-decoration:underline}.assistant__privacy-description[_ngcontent-%COMP%]{margin:0;color:#ffffffd9;line-height:1.5}"]})};export{te as a};
